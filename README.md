# congrego
Python data science project for a twitter country-wise sentiment analysis related to Covid-19

## Project Aims:
1. Build a supervised Natural Language Processing model to predict the sentiment behind a tweet.
2. Gather tweets related to COVID-19 around the globe from various major cities.
3. Use the model on the sampled tweets to find the sentiment of each country about COVID-19 ( Can be generalised to any trending topics). The sentiment analysis will be on a scale of 0 to 100. A greater number refers to a more positive feeling.

## File Description
### sentiment.py 
This program fetched tweets labelled as Positive or Negative from the NLTK Corpus Library. 
It contains 5000 positive and 5000 negative tweets. A supervised machine learning model is trained from 
7000 of those tweets randomised and the model accuracy is tested against the remaining 3000 tweets left.
Data cleaning was done using 
1. lemmatization
2. removing stop words, links, and numbers
The model output will be stored as pickle file named model.pickle. If pickle is already present in the current dictory, training is skipped and instead the model is loaded.
The model will output the sentiment behind a tweet as either "Positive" or "Negative".
At the end, you will be able to type a tweet and see the emotion prediction according to the model.
### scraper.py 
This program will be stored on AWS as a lambda function. It uses the Twitter API to fetch tweets from selected major cities from specified countries related to the desired topic. Note that the list of cities and countries has to be provided in the codebase along with their respective altitude, longitude and radius according to the Twitter API. Each tweet is passed through the NLP model to predict its sentiment. The script then calculates the number of positive tweets out the total number of tweets from each country to produce as a percentage the sentiment report for that respective country. For e.g if Canada has 10,000 positive tweets out of 25,000 tweets, the sentiment report for Canada is 40%.
The report for each country is stored in a DynamoDB table on AWS. The daily execution of that script is handled by CloudWatch.
### fetchData.py 
This simple program will be stored on AWS as a lambda function. It returns the sentiment report for each country stored in the "Country_Sentiment" DynamoDB table. This lambda function will be exposed using AWS API Gateway. An http get request to that API will return the final full sentiment analysis report.
### model.pickle
This is the NLP model generated by sentiment.py. It can be loaded in any python program using the pickle library.

## Architecture

## Installation
1. Sign up for a Twitter Developer Account to be able to use the Twitter API. 
2. Obtain the Twitter API keys and tokens and save those on a dynamoDB table.
3. Run sentiment.py (locally. No need for AWS) to generate model.pickle. This is the NLP model. Store that in an S3 bucket.
4. Save the python scripts ( scraper.py and fetchData.py ) as an AWS lambda function
5. Add the third-party library/dependencies for the python programs using either AWS layers or a deployment package.
6. Synchronise the daily execution of scraper.py using AWS CloudWatch
7. Expose the fetchData.py lambda function using AWS API Gateway. A get request to that API will return the final sentiment analysis report.

## Note
A cost is incurred per http request to the API or daily scraping hosted on AWS. As such, I have unsubscribed from this service after having completed the project. The API is currently unavailable. However, the codebase is finalised. You can re-create the project using the above instructions but you will have to pay for every usage of the lambda functions, although it is relatively affordable.
